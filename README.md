# Интеграция с АСУ ЭДО

#	WSS.CancelSet

Description TODO

Параметры:
- STATUS_FILTER_ID_LIST - перечень идентификаторов статусов для выгрузки откликов
- WSS_ADDRESS - Адрес сервиса WSS (https://wss-docs.ru/proxy)
- WSS_SERVICE - Имя сервиса WSS из WSDL
- WSS_ENDPOINT - Endpoint для сервиса WSS из WSDL
- WSS_OPERATION_NAME - Имя опреации из WSDL
- WSS_CREDENTIALS_NAME - Имя учетной записи WSS
- RUN_SCHEDULE - Расписание выполнения iFlow

# WSS.CheckSet

Выполняется по расписанию.
Выгружает отклики на статусе из параметра statusId_DVB, проверяет что проверка документов успешная. Если не успешная - возвращает отклик на предудыщий статус отклика (по аудиту статуса отклика).

- runSchedule - Расписание выполнения процесса
- statusId_DVB - Список идентификаторов статусов ДВБ, перечисленные через запятую.
- minJobReqIdNumber - Минимальный номер заявки на подбор
- jobRequisitionCountLimit - ограничение по количеству выгружаемых откликов
- picklistOptionIdNo - Идентификатор optionId пиклиста YesNo для значения No
- picklistOptionIdYes - Идентификатор optionId пиклиста YesNo для значения Yes

# WSS.CreateSet

Создает ККД. Выполняется по расписанию.
Выгружает отклики только для бизнес-единиц указанных в двух пиклистах, для заявок на подбор с кодом больше или равном указанным в параметрах.

- runSchedule - Расписание выполнения процесса
- MIN_JOB_REQ_ID_PICKLIST1 - минимальный номер заявки на подбор для откликов в бизнес-единицы из первого пиклиста
- MIN_JOB_REQ_ID_PICKLIST2 - минимальный номер заявки на подбор для откликов в бизнес-единицы из второго пиклиста
- PICKLIST_NAME_1 - код (externalCode) первого пиклиста в котором перечислены бизнес-единицы
- PICKLIST_NAME_2 - код (externalCode) второго пиклиста в котором перечислены бизнес-единицы

# WSS.UpdateSetCompleteness

Используется для установки статуса полноты документов.
Вызывается АСУ ЭДО по событию (обновление ККД).

- PICKLIST_OPTION_ID_NO - Идентификатор optionId пиклиста YesNo для значения No
- PICKLIST_OPTION_ID_YES - Идентификатор optionId пиклиста YesNo для значения Yes

# WSS.UpdateWSSSet

Обновляет ККД при ее изменении в SF.
Выполняется по расписанию.

- runSchedule - Расписание выполнения процесса
- APPROVERS_DATA_ENABLED - определяет отправляется ли перечень согласовавших заявку и оффер (если yes - отправляется)
- JOB_PROFILE_DUTIES_ENABLED - определяет отправляется ли описание должностных обязанностей из профиля или заявки (если yes - отправляется)
- JOB_PROFILE_DUTIES_SECTION_ID - идентификатор секции в котором хранится описание должностные обязанностей в профиле должности
- MINIMAL_JOB_REQUISITION_ID - Минимальный номер заявки на подбор
- OFFER_TEMPLATEID_GENERAL - Идентификатор шаблона оффера "стандартный" (определяет мэппинг полей)
- OFFER_TEMPLATEID_RSS - Идентификатор шаблона оффера "РСС" (определяет мэппинг полей)
- OFFER_TEMPLATEID_WORKER - Идентификатор шаблона оффера "Рабочие" (определяет мэппинг полей)
- REQUEST_TOP_LIMIT - Ограничивает количество откликов при выгрузке из SF
- statusId_Hired - Идентификаторы статуса "Сотрудник вышел", перечисленные через запятую. На этих статусах закрывается архивируется ККД для внутренних кандидатов.
- statusId_inProcess - Идентификаторы статусов **до** "Ожидание выхода", перечисленные через запятую. На этих статусах обновляется рекрутер.
- statusId_ozidanie - Идентификаторы статусов "Ожидание выхода", перечисленные через запятую. На этих статусах отправляется ККД для подготовки к приему кандидата, обновляется дата найма, фронт-офис, прочие роли (не рекрутер, т.к. он отдельно обновляется).
- statusId_PriorToDvb - Идентификаторы статусов **до** ДВБ, перечисленные через запятую. На этих статусах обновляется гражданство.
- statusId_ReturnToPreliminaryProcessing - Идентификаторы статусов "Ожиданые выхода", перечисленные через запятую. На этих статусах отмененная ККД возвращается в статус ожидание выхода для внешних или на подготовку для внутренних.
- statusId_ReturnToPreparation - Идентификаторы статусов до ожидания выхода, перечисленные через запятую. На этих статусах отмененная ККД возвращается на подготовку.

# WSS.UpdateWSSState

Возвращает отклик на статус "Доработка".
Вызывается АСУ ЭДО по событию - перевод ККД на статус доработка.
Выгружает отклик из SF с фильтром по статусу. Если откликов нет - выдает ошибку (т.е. она единая для случаев когда нет отклика или когда отклик на не допустимых для операции этапах).
Затем проверяет ид. шаблона заявки. Если он - топ, то кандидат перемещается на статус для заявки топ. В противном случае - для заявки стандарт.

- ALLOWED_INITIAL_STATUS - перечень идентификаторов статусов отклика на которых данная операция допустима (ожидание выхода).
- DOCUMENT_REVISION_STATUS_ID_STANDART - идентификатор статуса на который переводится отклик, если отлик для стандартной заявки на подбор
- DOCUMENT_REVISION_STATUS_ID_TOP - идентификатор статуса на который переводится отклик, если отлик для заявки на подбор "Топ"
